<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MixMovie - Free Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        body { background: #0f1014; color: white; scroll-behavior: smooth; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .movie-card:hover { transform: scale(1.08); z-index: 10; border-color: #eab308; }
    </style>
</head>
<body>
    <nav class="p-4 flex justify-between items-center bg-black/90 sticky top-0 z-50 backdrop-blur">
        <h1 class="text-2xl font-black text-yellow-500 tracking-tighter">MIXMOVIE</h1>
        <form action="/" method="GET" class="w-1/2 md:w-1/3">
            <input name="q" placeholder="Search Movies, Sports, TV..." class="bg-gray-800 px-4 py-2 rounded-full w-full outline-none focus:ring-2 focus:ring-yellow-500 text-sm">
        </form>
        <a href="/admin" class="hidden md:block text-xs text-gray-500">Admin</a>
    </nav>

    <div id="player-overlay" class="fixed inset-0 bg-black/95 z-[100] hidden flex flex-col items-center justify-center p-4">
        <button onclick="closePlayer()" class="absolute top-5 right-10 text-5xl text-white">&times;</button>
        <div id="video-box" class="w-full max-w-5xl aspect-video bg-black rounded-lg overflow-hidden border-2 border-yellow-500 shadow-2xl">
            </div>
    </div>

    <div class="flex gap-4 p-6 overflow-x-auto no-scrollbar border-b border-gray-800">
        <a href="#" class="bg-yellow-500 text-black px-6 py-1 rounded-full font-bold">Home</a>
        <a href="#section-Sports" class="bg-gray-800 px-6 py-1 rounded-full font-bold hover:bg-red-600 transition">Live Sports</a>
        <a href="#section-Movie" class="bg-gray-800 px-6 py-1 rounded-full font-bold hover:bg-yellow-500 hover:text-black">Movies</a>
        <a href="#section-Live" class="bg-gray-800 px-6 py-1 rounded-full font-bold hover:bg-yellow-500 hover:text-black">Live TV</a>
    </div>

    <div class="p-6 md:p-12">
        <% ['Sports', 'Movie', 'Live', 'Drama'].forEach(cat => { %>
            <section id="section-<%= cat %>" class="mb-12">
                <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                    <span class="w-1 h-6 bg-yellow-500"></span> Latest <%= cat %>
                </h2>
                <div class="flex gap-5 overflow-x-auto pb-6 no-scrollbar">
                    <% content.filter(item => item.cat === cat).forEach(item => { %>
                        <div class="movie-card min-w-[160px] md:min-w-[200px] cursor-pointer transition-all duration-300 border-2 border-transparent rounded-xl overflow-hidden bg-gray-900" 
                             onclick="playMedia('<%= item.link %>', '<%= item.cat %>')">
                            <div class="relative">
                                <img src="<%= item.img %>" class="h-60 md:h-72 w-full object-cover">
                                <% if(cat === 'Sports' || cat === 'Live') { %>
                                    <span class="absolute top-2 left-2 bg-red-600 text-[10px] px-2 py-1 rounded font-bold animate-pulse">LIVE</span>
                                <% } %>
                            </div>
                            <div class="p-3 text-sm font-bold truncate text-gray-300"><%= item.title %></div>
                        </div>
                    <% }) %>
                </div>
            </section>
        <% }) %>
    </div>

    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <script>
        function playMedia(link, cat) {
            // Open Adsterra/Monetag Ad in new tab
            window.open("https://your-ad-link.com", "_blank");

            const overlay = document.getElementById('player-overlay');
            const videoBox = document.getElementById('video-box');
            overlay.classList.remove('hidden');

            if(cat === 'Sports' || cat === 'Live') {
                // For HLS Streaming (.m3u8)
                videoBox.innerHTML = `
                    <video id="my-player" class="video-js vjs-16-9 vjs-big-play-centered" controls autoPlay>
                        <source src="${link}" type="application/x-mpegURL">
                    </video>`;
                videojs('my-player');
            } else {
                // For Movies/Dramas (Embed Iframe)
                videoBox.innerHTML = `<iframe src="${link}" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>`;
            }
        }

        function closePlayer() {
            document.getElementById('player-overlay').classList.add('hidden');
            document.getElementById('video-box').innerHTML = '';
        }
    </script>
</body>
</html>
